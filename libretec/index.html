<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>Libretec</title>
    <!-- load Chart.js from CDN with defer attribute -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js" defer></script>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="container">
    <div class="menu">
      <h1 id="title">Biblioteca</h1>
      <form id="form" role="search">
        <input type="search" id="query" name="q" placeholder="Ingresa ISBN del libro" aria-label="Search through site content">
        <button onclick="search()">Search</button>
    </form>

      <div class="collapse-menu">
        <div id="cc-biblioteca" class="box">
           
        </div>
      </div>
      
      <button id="open-reportes">Abrir reportes</button>
        
        <h3>Opciones</h3>
        <div class="menu-button">
            <button class="btnAdd" id="btnAgregar" onclick="openAgregar()">Agregar</button>
            <div class="dropdown" id="dm-agregar">
                <ul class="icons dropdown-toggle">
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
                <ul class="dropdown-menu">
                    <li>Alumnos</li>
                    <li>Autor</li>
                    <li>Carrera</li>
                    <li>Libros</li>
                    <li>Editorial</li>
                    <li>Prestamos</li>
                </ul>
            </div>
        </div>
        <div class="menu-button">
            <button class="btnAdd" id="btnConsultar">Consultar</button>
            <div class="dropdown" id="dm-consultar">
                <ul class="icons dropdown-toggle">
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
                <ul class="dropdown-menu">
                    <li>Alumnos</li>
                    <li>Autor</li>
                    <li>Carrera</li>
                    <li>Libros</li>
                    <li>Editorial</li>
                    <li>Prestamos</li>
                </ul>
            </div>
        </div>
        <div class="menu-button">
            <button class="btnAdd" id="btnActualizar">Actualizar</button>
            <div class="dropdown" id="dm-actualizar">
                <ul class="icons dropdown-toggle">
                    <li></li>
                    <li></li>
                    <li></li>
                </ul>
                <ul class="dropdown-menu">
                    <li>Alumnos</li>
                    <li>Autor</li>
                    <li>Carrera</li>
                    <li>Libros</li>
                    <li>Editorial</li>
                    <li>Prestamos</li>
                </ul>
            </div>
        </div>

    </div>
    <div class="modal" id="modalFrame">   
        <div class="content">

        </div>  
        <button id="close-modal">X</button>
    </div>
    <div class="app">
        <iframe id="my_iframe" src="libretec.html"></iframe>
    </div>
    </div>
    <script src="addData.js">
    </script>
    <script src="modalframe.js">   
    </script>
    <script src="reportes.js">
        
    </script>

    <script>
        function search(){
            var query = document.getElementById("query").value;
            var cc = document.getElementById("cc-biblioteca");
            fetchData('libros/'+query).then((data) => {
            // Assuming the data is an array of objects with properties "titulo" and "num_prestamos"
            // Get the first element of the array
            for (var i = 0; i<data.data.length; i++){
                var firstElement = data.data[i];
                // Update the card elements with the properties of the first element
                cardFooter.innerHTML = `<div class="card__footer-section">
                            <div class="footer-section__data">1</div>
                            <div class="footer-section__label">${firstElement.titulo}</div>
                        </div>`;
                        console.log(firstElement.titulo);
            }
        
            });
        }
            
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
        // Select all the dropdown elements
        const dropdowns = document.querySelectorAll(".dropdown");
        // Loop through each dropdown element
        dropdowns.forEach(function (dropdown) {
            // Get the toggle button and menu elements for each dropdown
            const toggleButton = dropdown.querySelector(".dropdown-toggle");
            const menu = dropdown.querySelector(".dropdown-menu");

            // Add a click event listener to the toggle button
            toggleButton.addEventListener("click", function () {
            menu.classList.toggle("show");
            });

            // Add a click event listener to the dropdown element
            dropdown.addEventListener("click", function (event) {
            if (event.target.tagName === "LI") {
                menu.classList.remove("show");
                handleOptionSelected(event.target.textContent);
                toggleButton.textContent = event.target.textContent;
            }
            });
        });

        // Hide the dropdown menu when clicking outside the dropdown element
        document.addEventListener("click", function (event) {
            const targetElement = event.target;
            // Loop through each dropdown element
            dropdowns.forEach(function (dropdown) {
            if (!dropdown.contains(targetElement)) {
                // Get the menu element for each dropdown
                const menu = dropdown.querySelector(".dropdown-menu");
                menu.classList.remove("show");
            }
            });
        });

        function handleOptionSelected(option) {
            // Handle the selected option here
            
        }
        });

  </script>
</body>
</html>